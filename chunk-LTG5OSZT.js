import{a as ae,b as y}from"./chunk-U3R6Z6IE.js";import"./chunk-GY7MNEGK.js";import{d as oe,e as ne}from"./chunk-NWSI5LSJ.js";import{d as Y,e as Z}from"./chunk-F534QGKC.js";import"./chunk-36JN3LZY.js";import"./chunk-KTTYXOAR.js";import{d as X,e as v}from"./chunk-CITN33F7.js";import{d as se}from"./chunk-NDN7EVLF.js";import{a as ee,b as te,c as re,d as ie}from"./chunk-JR224WSU.js";import{b as V,e as q,f as J,i as U,l as $,m as K,o as Q,q as W}from"./chunk-SCPXYKF5.js";import{i as L,n as j,o as G}from"./chunk-ARXZC3YG.js";import{B as k,Gb as _,Hb as I,La as a,Vb as s,W as R,Wb as C,Xa as f,Xb as c,fc as O,hc as S,ia as u,jc as M,mb as h,nb as x,ob as z,qb as A,rb as H,sb as p,sc as B,tb as n,tc as P,ub as o,vb as l}from"./chunk-UA4XOS2Z.js";var E=["Pendiente","En progreso","Aprobado","Rechazado"],F=["Vacaciones","D\xEDa libre","Enfermedad","Licencia","Capacitaci\xF3n","Horario","Pagos"];function T(t){let e=Math.floor(Math.random()*t.length);return t[e]}function me(t,e){let i=new Date,r=new Date(i),m=new Date(i);r.setDate(i.getDate()+t),m.setDate(i.getDate()+e);let d=r.getTime()+Math.random()*(m.getTime()-r.getTime());return new Date(d)}function le(){let t=[],e=se(),i=Math.floor(Math.random()*12)+17;for(let r=0;r<i;r++){let m=T(E),d=me(-30,-5),w=Math.random()<.5&&m!=="Pendiente",{id:ce,rol:ue,image:fe,name:ge}=e[Math.floor(Math.random()*e.length-1)],g={employee:{id:ce,rol:ue,image:fe,name:ge},status:m,entry_date:d,metter:T(F),description:"Lorem ipsum dolor sit amet consectetur adipiscing elit sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."};["Aprobado","Rechazado","Completado","Archivado"].includes(m)&&(g.discharge_date=me(d.getDate()-new Date().getDate()+5,d.getDate()-new Date().getDate()+15)),w&&(g.feedback="Feedback: Proceso revisado y gestionado con \xE9xito."),m!=="Pendiente"&&(g.owner=T(e).name),t.push(g)}return t}var D=class t{status=u(E);metters=u(F);filters=B();fb=R(Q);filtersForm=this.fb.group({name:[],matter:[],status:[]});constructor(){this.filtersForm.valueChanges.pipe(k(300)).subscribe({next:e=>this.filters.emit({name:e.name||void 0,matter:e.matter||void 0,status:e.status||void 0})})}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=f({type:t,selectors:[["app-procedures-header"]],outputs:{filters:"filters"},decls:10,vars:3,consts:[[1,"w-full"],[1,"grid","m-0","w-full","div-filters",3,"formGroup"],[1,"col-3","pl-4"],[1,"w-full","h-full"],["formControlName","name","type","text","pInputText","","placeholder","Nombre empleado",1,"w-full","text-sm","h-full","underline-input","pl-2"],[1,"pi","pi-search"],[1,"col-2","mx-4","px-2"],["formControlName","matter","size","small","placeholder","Asunto","showClear","",1,"w-full",3,"options"],[1,"col-2","px16"],["formControlName","status","size","small","placeholder","Estado","showClear","",1,"w-full",3,"options"]],template:function(i,r){i&1&&(n(0,"div",0)(1,"form",1)(2,"div",2)(3,"p-iconfield",3),l(4,"input",4)(5,"p-inputicon",5),o()(),n(6,"div",6),l(7,"p-select",7),o(),n(8,"div",8),l(9,"p-select",9),o()()()),i&2&&(a(),p("formGroup",r.filtersForm),a(6),p("options",r.metters()),a(2),p("options",r.status()))},dependencies:[W,U,V,q,J,$,K,ne,oe,te,ee,ie,re,v],encapsulation:2})};var he=(t,e,i,r)=>({warning:t,active:e,inactive:i,"primary-btn":r});function xe(t,e){if(t&1&&l(0,"p-avatar",3),t&2){let i=I();p("image",i.item().employee.image)}}function Pe(t,e){t&1&&l(0,"p-avatar",4)}function ve(t,e){if(t&1&&(n(0,"span"),s(1),S(2,"date"),o()),t&2){let i=I();a(),c(" ",M(2,1,i.item().discharge_date,"dd/MM/yyyy")," ")}}function ye(t,e){t&1&&(n(0,"span"),s(1," - "),o())}function De(t,e){t&1&&l(0,"p-button",20)}function be(t,e){t&1&&l(0,"p-button",21)}function we(t,e){t&1&&l(0,"p-button",22)}function _e(t,e){t&1&&l(0,"p-button",22)}var b=class t{item=P.required();static \u0275fac=function(i){return new(i||t)};static \u0275cmp=f({type:t,selectors:[["app-procedure-item"]],inputs:{item:[1,"item"]},decls:50,vars:20,consts:[[1,"flex","flex-column","w-full","h-full","p-1"],[1,"flex","justify-content-between","align-items-center","w-full","flex-shrink-0"],[1,"flex","flex-shrink-0"],["shape","circle",1,"flex-shrink-0",3,"image"],["icon","pi pi-user","shape","circle",1,"flex-shrink-0"],[1,"flex","flex-column","flex-grow-1","relative","pr-5","mx-2"],[1,"text-xs"],[1,"pi","pi-info-circle","primary-color","absolute","top-0","right-0"],[1,"btn","text-xs","text-center","border-round-xs","my-1","bg-white",3,"ngClass"],[1,"divider","my-1","flex-shrink-0"],[1,"flex","w-full","flex-shrink-0","my-1","justify-content-around"],[1,"flex","flex-column","justify-content-center","gap-1"],[1,"text-center","t-gray","text-xs"],[1,"text-xs","inactive","btn","text-center"],[1,"w-full","flex","flex-column","my-1","flex-grow-1"],[1,"t-gray","text-xs"],[1,"scrollable","w-full","h-full","border-gray","border-round-lg","py-1","px-3","text-xs","t-gray",2,"min-height","20%"],[1,"flex","align-items-center","w-full","flex-shrink-0"],[1,"t-gray","flex-shrink-0","text-xs"],[1,"text-xs","ml-1","inactive","btn","text-center","flex-grow-1"],["size","small","severity","primary","outlined","","label","Tomar",1,"flex-shrink-0","ml-4","flex"],["size","small","severity","primary","outlined","","label","Continuar",1,"flex-shrink-0","ml-4","flex"],["size","small","severity","primary","outlined","","label","Detalles",1,"flex-shrink-0","ml-4","flex"]],template:function(i,r){if(i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),h(3,xe,1,1,"p-avatar",3)(4,Pe,1,0,"p-avatar",4),n(5,"div",5)(6,"p",6),s(7),o(),n(8,"p",6),s(9),o(),l(10,"i",7),o()(),n(11,"p",8),s(12),o()(),l(13,"div",9),n(14,"div",10)(15,"div",11)(16,"p",12),s(17,"Asunto"),o(),n(18,"p",13),s(19),o()(),n(20,"div",11)(21,"p",12),s(22,"Pedido"),o(),n(23,"p",13),s(24),S(25,"date"),o()(),n(26,"div",11)(27,"p",12),s(28,"Resuelto"),o(),n(29,"p",13),h(30,ve,3,4,"span")(31,ye,2,0,"span"),o()()(),n(32,"div",14)(33,"span",15),s(34,"Descripci\xF3n"),o(),n(35,"div",16),s(36),o(),n(37,"span",15),s(38,"Feedback"),o(),n(39,"div",16),s(40),o()(),n(41,"div",17)(42,"p",18),s(43,"Responsable"),o(),n(44,"p",19),s(45),o(),h(46,De,1,0,"p-button",20)(47,be,1,0,"p-button",21)(48,we,1,0,"p-button",22)(49,_e,1,0,"p-button",22),o()()),i&2){let m;a(3),x(r.item().employee.image?3:4),a(4),C(r.item().employee.name),a(2),C(r.item().employee.rol),a(2),p("ngClass",O(15,he,r.item().status=="Rechazado",r.item().status=="Aprobado",r.item().status=="En progreso",r.item().status=="Pendiente")),a(),c(" ",r.item().status," "),a(7),c(" ",r.item().metter," "),a(5),c(" ",M(25,12,r.item().entry_date,"dd/MM/yyyy")," "),a(6),x(r.item().discharge_date?30:31),a(6),c(" ",r.item().description," "),a(4),c(" ",r.item().feedback," "),a(5),c(" ",r.item().owner||"-"," "),a(),x((m=r.item().status)==="Pendiente"?46:m==="En progreso"?47:m==="Aprobado"?48:m==="Rechazado"?49:-1)}},dependencies:[y,Z,Y,G,L,v,X,j],encapsulation:2})};function Ie(t,e){if(t&1&&l(0,"app-procedure-item",3),t&2){let i=e.$implicit;p("item",i)}}var N=class t{itemsPage=6;itemData=P();proceduresData;procedures=u([]);proceduresFiltered=u([]);currentSizeItems={first:0};constructor(){this.proceduresData=u(le()),this.proceduresFiltered.set(this.proceduresData()),this.onPageChange(this.currentSizeItems)}filterProcedures(e){this.proceduresFiltered.set(this.proceduresData()),this.proceduresFiltered.update(i=>i.filter(r=>{let m=e.matter?r.metter==e.matter:!0,d=e.status?r.status==e.status:!0,w=e.name?r.employee.name.toLowerCase().includes((e.name||"").toLowerCase()):!0;return m&&d&&w})),this.onPageChange({first:0})}onPageChange(e){this.currentSizeItems=e,this.procedures.update(()=>this.proceduresFiltered().slice(e.first,e.first+this.itemsPage))}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=f({type:t,selectors:[["app-procedures"]],inputs:{itemData:[1,"itemData"]},decls:7,vars:7,consts:[[1,"flex","flex-column","w-full","h-full"],[1,"w-full","flex","flex-shrink-0",3,"filters"],[1,"flex","flex-wrap","w-full","flex-grow-1","p-1","justify-content-around"],[1,"flex","border-gray","border-round-lg","p-1",2,"height","49%","width","32%",3,"item"],[1,"flex","flex-shrink-0","justify-content-end"],["currentPageReportTemplate","{first} - {last} de {totalRecords}",1,"text-xs","py-0",3,"onPageChange","first","rows","totalRecords","showPageLinks","showFirstLastIcon","showCurrentPageReport","showJumpToPageDropdown"]],template:function(i,r){i&1&&(n(0,"div",0)(1,"app-procedures-header",1),_("filters",function(d){return r.filterProcedures(d)}),o(),n(2,"div",2),A(3,Ie,1,1,"app-procedure-item",3,z),o(),n(5,"div",4)(6,"p-paginator",5),_("onPageChange",function(d){return r.onPageChange(d)}),o()()()),i&2&&(a(3),H(r.procedures()),a(3),p("first",0)("rows",r.itemsPage)("totalRecords",r.proceduresFiltered().length)("showPageLinks",!1)("showFirstLastIcon",!1)("showCurrentPageReport",!0)("showJumpToPageDropdown",!1))},dependencies:[D,b,y,ae],styles:["[_nghost-%COMP%]{width:100%;height:100%}"]})};export{N as default};
