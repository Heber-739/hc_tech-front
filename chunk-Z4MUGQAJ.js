import{a as V,b as z}from"./chunk-TEHXK7YG.js";import"./chunk-5LC32MW2.js";import{b}from"./chunk-ATVMXRFU.js";import{d as W}from"./chunk-2ZHP6MJH.js";import{B as L,C as Y,D as q,E as U,e as P,f as R,h as B,k as y,l as v,o as S,r as D,s as w,u as _,w as C}from"./chunk-5Z6YTMLP.js";import"./chunk-36JN3LZY.js";import"./chunk-GLO2RZQ3.js";import{B as k,Db as E,Eb as u,Ka as s,Qb as $,Sb as m,Tb as d,Ub as j,V as f,Wa as p,ha as H,lb as G,mb as A,nb as h,oc as O,pb as g,qb as x,rb as c,sb as r,tb as o,ub as l}from"./chunk-ZTPKSPIT.js";var F=class n{fb=f(_);filtersForm;constructor(){this.filtersForm=this.fb.group({name:[""],rol:[""]}),this.filtersForm.valueChanges.pipe(k(300)).subscribe({next:i=>console.log(i)})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=p({type:n,selectors:[["app-schedules-header"]],decls:11,vars:1,consts:[[1,"w-full"],[1,"grid","m-0","w-full","div-filters",3,"formGroup"],[1,"col-3","ml-3","flex","align-content-center"],[1,"outline-none","w-10"],["type","text","pInputText","","placeholder","Empleado","formControlName","name",1,"h-full","w-full","underline-input"],[1,"pi","pi-search"],[1,"col-3","flex","align-content-center"],["type","text","pInputText","","placeholder","Rol","formControlName","rol",1,"h-full","w-full","underline-input"],[1,"col-4"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"form",1)(2,"div",2)(3,"p-iconfield",3),l(4,"input",4)(5,"p-inputicon",5),o()(),r(6,"div",6)(7,"p-iconfield",3),l(8,"input",7)(9,"p-inputicon",5),o()(),l(10,"div",8),o()()),e&2&&(s(),c("formGroup",t.filtersForm))},dependencies:[Y,L,C,S,B,y,v,D,w,U,q],encapsulation:2})};function Z(n,i){if(n&1&&l(0,"p-avatar",11),n&2){let e=u().$implicit;c("image",e.image)}}function ee(n,i){n&1&&l(0,"p-avatar",12)}function te(n,i){if(n&1&&(r(0,"div",9)(1,"div",10),G(2,Z,1,1,"p-avatar",11)(3,ee,1,0,"p-avatar",12),r(4,"div",13)(5,"p",14),m(6),o(),r(7,"p",14),m(8),o()()(),r(9,"form",15),l(10,"p-datepicker",16)(11,"p-datepicker",17),o()()),n&2){let e=i.$implicit,t=u();s(2),A(e.image?2:3),s(4),d(e.name),s(2),d(e.rol),s(),c("formGroup",t.scheduleForm),s(),c("iconDisplay","input")("showIcon",!0)("timeOnly",!0),s(),c("iconDisplay","input")("showIcon",!0)("timeOnly",!0)}}var N=class n{shift=O.required();fb=f(_);scheduleForm;constructor(){this.scheduleForm=this.fb.group({entry:[""],discharge:[""]})}getOptionsDate(){return this.shift().schedule_options.map(i=>i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=p({type:n,selectors:[["app-schedules-shift"]],inputs:{shift:[1,"shift"]},decls:16,vars:1,consts:[[1,"flex","flex-column","h-full","border-round-lg","column","p-1"],[1,"w-full","flex","flex-column","bg-white","flex-shrink-0","border-round-lg"],[1,"w-full","text-sm","flex","justify-content-center","align-items-center"],[1,"t-gray"],[1,"divider","my-1","mx-5"],[1,"flex","border-gray","my-2","mx-1","t-gray","py-1","text-center"],[1,"w-6"],[1,"w-3"],[1,"flex","flex-column","gap-1","h-full","scrollable"],[1,"flex","align-items-center","justify-content-between","bg-white","border-round-sm","gap-1","py-2"],[1,"flex","flex-shrink-0","gap-1"],["shape","circle",1,"flex-shrink-0",3,"image"],["icon","pi pi-user","shape","circle",1,"flex-shrink-0"],[1,"flex","flex-column","flex-grow-1"],[1,"text-xs"],["action","",1,"flex","w-6",3,"formGroup"],["size","small","fluid","","formControlName","entry",1,"w-6","custom-panel",3,"iconDisplay","showIcon","timeOnly"],["size","small","fluid","","formControlName","discharge",1,"w-6","custom-panel",3,"iconDisplay","showIcon","timeOnly"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"p",3),m(4),o()(),l(5,"div",4),o(),r(6,"div",5)(7,"p",6),m(8,"Empleado"),o(),r(9,"p",7),m(10,"ingreso"),o(),r(11,"p",7),m(12,"Egreso"),o()(),r(13,"div",8),g(14,te,12,10,"div",9,h),o()()),e&2&&(s(4),j(" ",t.shift().shift," "),s(10),x(t.shift().employees))},dependencies:[R,P,z,V,C,S,y,v,D,w],encapsulation:2})};var M=n=>{let i=W(),e={day:n,shift:[]},t=new Date,a=new Date;return t.setHours(7,0,0,0),a.setHours(15,0,0,0),e.shift.push({shift:"Ma\xF1ana",employees:b().employees,schedule_options:I(t,a)}),t.setHours(15,0,0,0),a.setHours(23,0,0,0),e.shift.push({shift:"Tarde",employees:b().employees,schedule_options:I(t,a)}),t.setHours(23,0,0,0),a.setHours(7,0,0,0),e.shift.push({shift:"Noche",employees:b().employees,schedule_options:I(t,a)}),e};function I(n,i){let e=[],t=new Date(n.getTime());for(;t.getTime()<=i.getTime();)e.push(new Date(t)),t.setMinutes(t.getMinutes()+15);return e}function ie(n,i){if(n&1&&l(0,"app-schedules-shift",6),n&2){let e=i.$implicit,t=u();$(t.isCurrentShift(e.shift)?"outline: 2px solid var(--accent)":""),c("shift",e)}}var T=class n{shifts;constructor(){this.shifts=H(M(new Date))}getDay(){let i=this.shifts().day,e=i.getDate(),t=i.getFullYear(),a=i.toLocaleDateString("es-AR",{month:"long"}),Q=a.charAt(0).toUpperCase()+a.slice(1);return`${e} de ${Q}, ${t}`}changeDay(i){let e=this.shifts().day;i?e.setDate(e.getDate()+1):e.setDate(e.getDate()-1),this.shifts.set(M(e))}isCurrentShift(i){let e=new Date().getHours();switch(i){case"Ma\xF1ana":return e>=7&&e<15;case"Tarde":return e>=15&&e<23;default:return e>=23&&e<7}}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=p({type:n,selectors:[["app-schedules"]],decls:9,vars:1,consts:[[1,"flex","w-full","flex-grow-1","bg-light-gray","gap-2","p-2"],[1,"col","p-0","border-round-lg","bg-white",2,"height","calc(100vh - 158px)",3,"shift","style"],[1,"flex","flex-shrink-0","justify-content-center","py-2","align-items-center"],[1,"pi","pi-chevron-left","text-primary","text-xl",3,"click"],[1,"mx-5"],[1,"pi","pi-chevron-right","text-primary","text-xl",3,"click"],[1,"col","p-0","border-round-lg","bg-white",2,"height","calc(100vh - 158px)",3,"shift"]],template:function(e,t){e&1&&(l(0,"app-schedules-header"),r(1,"div",0),g(2,ie,1,3,"app-schedules-shift",1,h),o(),r(4,"div",2)(5,"i",3),E("click",function(){return t.changeDay(!1)}),o(),r(6,"p",4),m(7),o(),r(8,"i",5),E("click",function(){return t.changeDay(!0)}),o()()),e&2&&(s(2),x(t.shifts().shift),s(5),d(t.getDay()))},dependencies:[F,N],encapsulation:2})};export{T as default};
